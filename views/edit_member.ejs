<%- include('partials/header') %>

<form method="post" action="/edit_member/<%= project.id %>/<%= memberCompany.orgId %>/<%= memberCompany.id %>" enctype="multipart/form-data" onsubmit="arrangeContacts()">
  <% if(locals.projectId) { %>
    <input type="hidden" name="project_id" value="<%= projectId %>">
  <% } %>
  <div class="main-header-project-edit">
    <div class="project-logo-project-edit-main">
      <div class="project-logo-project-edit" id="logoRef">
        <div style="position: relative;">
          <div class="project-logo-project-edit-inside" style="position: absolute;" >
            <a href="#" onclick="document.getElementById('logo').click(); return false;" /> UPLOAD LOGO </a>
            <input type="file" accept="image/*" name='logoCompany' id="logo" style="visibility: hidden;" value="<%= memberCompany.orgLogoRef %>" />
            <input type="hidden" name="old_logoRef" id="old_logoRef" value="<%= memberCompany.orgLogoRef %>">
          </div>
          <img src="/uploads/logos/<%= memberCompany.orgLogoRef %>" id="previewLogo" alt="LogoRef" style="width: 100%;">
        </div>
      </div>
      <div class="image-message-project-edit">
        Add .jpg, .png, or vector image files under 1 mb
      </div>
    </div>
    <div class="main-header-title-project-edit">
      <span style="color:#11ABDE">| </span>
      <input class="main-header-title-project-input" type="text" name="company_name" placeholder="<%= memberCompany.orgName %>" value="<%= memberCompany.orgName %>">
    </div>
    <div class="last-edited-project-edit">
      EDITING COMPANY CONTACTS -  Last saved 1:05 PM
    </div>
  </div>
  <div class="hr-divider-keyline"></div>
  <div class="white-subheader">
    <!-- <a>
      <div class="content-subheader-project">
        <div class="button-title-add-company">VIEW MEMBERSHIP AGREEMENT</div>
      </div>
    </a> -->
    <div class="content-subheader-project">
      <div class="hr-divider-vertical"></div>
      <div class="title-subheader-project">
        <span class="dropdown-toggle" data-toggle="dropdown">
          Membership Tier | <strong style="color:#044D74;"> <span id="membership_tier_label" >Select</span> </strong> <span class="caret"></span>
        </span>
        <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
          <li role="presentation"><a onclick="changeMembershipTier('PLATINUM')" role="menuitem" tabindex="-1">Platinum</a></li>
          <li role="presentation"><a onclick="changeMembershipTier('GOLD')" role="menuitem" tabindex="-1">Gold</a></li>
          <li role="presentation"><a onclick="changeMembershipTier('SILVER')" role="menuitem" tabindex="-1">Silver</a></li>
          <li role="presentation"><a onclick="changeMembershipTier('AFFILIATE')" role="menuitem" tabindex="-1">Affiliate</a></li>
        </ul>
        <input type="hidden" name="membership_tier" class="form-control" id="membership_tier" value="UNSPECIFIED">
      </div>
      <div class="hr-divider-vertical"></div>
      <!-- <div class="title-subheader-project">

      </div>
      <div class="hr-divider-vertical"></div> -->
    </div>
    <button class="save-button-project-edit" type="submit">
        <strong>SAVE</strong>
    </button>
  </div>
  <div class="hr-divider-keyline"></div>
  <div class="col-sm-12">
    <br>
    <div class="subtitle-content-project">Company Info</div>
    <div class="hr-divider-keyline"></div>
    <br>
    <br>
    <div class="col-sm-6 ">
      <div class="col-lg-12 ">
        <div class="subtitle-content-project">Headquarters Address</div>
        <div class="hr-divider-keyline"></div>
        <br>
      </div>
      <div class="col-lg-12 ">
        <input type="text" name="headquarters_address_line_1" class="domain-project-edit" placeholder="<%= memberCompany.addresses.main.address.thoroughfareLine1 %>" value="<%= memberCompany.addresses.main.address.thoroughfareLine1 %>"> <br><br>
      </div>
      <div class="col-lg-12 " >
        <input type="text" name="headquarters_address_line_2" class="domain-project-edit" placeholder="<%= memberCompany.addresses.main.address.thoroughfareLine2 %>" value="<%= memberCompany.addresses.main.address.thoroughfareLine2 %>"> <br><br>
      </div>
      <div class="col-lg-12 " style="padding: 0px; margin-left:10px;">
        <div class="col-lg-5 ">
          <input type="text" name="headquarters_city" class="textbox-add-company" placeholder="<%= memberCompany.addresses.main.address.localityName %>" value="<%= memberCompany.addresses.main.address.localityName %>">
        </div>
        <div class="col-lg-2">
          <input type="text" name="headquarters_state" class="textbox-add-company" placeholder="<%= memberCompany.addresses.main.address.administrativeArea %>" value="<%= memberCompany.addresses.main.address.administrativeArea %>">
        </div>
        <div class="col-lg-3">
          <select class="textbox-add-company" name="headquarters_country">
            <%- include('partials/selectCountryCode') %>
          </select>
        </div>
        <div class="col-lg-2">
          <input type="text" name="headquarters_zip_code" class="textbox-add-company" placeholder="<%= memberCompany.addresses.main.address.postalCode %>" value="<%= memberCompany.addresses.main.address.postalCode %>">
        </div>
      </div>
      <div class="col-lg-12 " style="margin-top: 20px;">
        <div class="col-lg-5 " style="margin-left:-15px">
          <input type="text" name="headquarters_phone" class="domain-project-edit" placeholder="<%= memberCompany.addresses.main.address.phone %>" value="<%= memberCompany.addresses.main.address.phone %>"> <br><br>
        </div>
      </div>
    </div>

    <div class="col-sm-6 ">
      <div class="col-lg-12 ">
        <div class="subtitle-content-project">Billing Address</div>
        <div class="hr-divider-keyline"></div>
        <br>
      </div>
      <div class="col-lg-12 ">
        <input type="text" name="billing_address_line_1" class="domain-project-edit" placeholder="<%= memberCompany.addresses.billing.address.thoroughfareLine1 %>" value="<%= memberCompany.addresses.billing.address.thoroughfareLine1 %>" > <br><br>
      </div>
      <div class="col-lg-12 " >
        <input type="text" name="billing_address_line_2" class="domain-project-edit" placeholder="<%= memberCompany.addresses.billing.address.thoroughfareLine2 %>" value="<%= memberCompany.addresses.billing.address.thoroughfareLine2 %>" > <br><br>
      </div>
      <div class="col-lg-12 " style="padding: 0px; margin-left:10px;">
        <div class="col-lg-5 ">
          <input type="text" name="billing_city" class="textbox-add-company" placeholder="<%= memberCompany.addresses.billing.address.localityName %>" value="<%= memberCompany.addresses.billing.address.localityName %>" >
        </div>
        <div class="col-lg-2">
          <input type="text" name="billing_state" class="textbox-add-company" placeholder="<%= memberCompany.addresses.billing.address.administrativeArea %>" value="<%= memberCompany.addresses.billing.address.administrativeArea %>" >
        </div>
        <div class="col-lg-3">
          <select class="textbox-add-company" name="billing_country">
            <%- include('partials/selectCountryCode') %>
          </select>
        </div>
        <div class="col-lg-2">
          <input type="text" name="billing_zip_code" class="textbox-add-company" placeholder="<%= memberCompany.addresses.billing.address.postalCode %>" value="<%= memberCompany.addresses.billing.address.postalCode %>" >
        </div>
      </div>
      <div class="col-lg-12 " style="margin-top: 20px;">
        <div class="col-lg-5 " style="margin-left:-15px">
          <input type="text" name="billing_phone" class="domain-project-edit" placeholder="<%= memberCompany.addresses.billing.address.phone %>" value="<%= memberCompany.addresses.billing.address.phone %>" > <br><br>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-12">
    <input type="hidden" id="updatedContacts"  name="updatedContacts" value="">
    <br><br><br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2">Contacts</div>
      <div class="col-sm-1">Bio</div>
      <div class="col-sm-7">Information</div>
      <div class="col-sm-1">Email Alias</div>
      <div class="col-sm-1">Headshot</div>
    </div>
    <br><br>
    <div class="hr-divider-keyline"></div>
    <br><br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company">BOARD MEMBER</div>
      <div class="col-sm-1"><a>Add</a></div>
      <input type="hidden" name="board_contact_id" id="board_contact_id" value="<%= memberCompany.contacts.board.id %>">
      <div class="col-sm-1"><input type="text" name="board_contact_first_name" class="domain-project-edit" placeholder="<%= memberCompany.contacts.board.givenName %>" value="<%= memberCompany.contacts.board.givenName %>" ></div>
      <div class="col-sm-1"><input type="text" name="board_contact_last_name" class="domain-project-edit" placeholder="<%= memberCompany.contacts.board.familyName %>" value="<%= memberCompany.contacts.board.familyName %>" ></div>
      <div class="col-sm-3"><input type="text" name="board_contact_email" class="domain-project-edit" placeholder="<%= memberCompany.contacts.board.email %>" value="<%= memberCompany.contacts.board.email %>" ></div>
      <div class="col-sm-2"><input type="text" name="board_contact_phone" class="domain-project-edit" placeholder="<%= memberCompany.contacts.board.phon %>" value="<%= memberCompany.contacts.board.phone %>" ></div>
      <div class="col-sm-1"><input type="text" name="board_contact_email_alias" class="domain-project-edit" placeholder="info@"></div>
      <div class="col-sm-1"><img src="assets/img/headshot.png" alt="" style="width:40px; margin-right:5px;  margin-left:-5px;" /><a><b>Add</b></a></div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
    <br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company">TECHNICAL (TSC)</div>
      <input type="hidden" name="technical_contact_id" id="technical_contact_id" value="<%= memberCompany.contacts.technical.id %>">
      <div class="col-sm-1"><a>Add</a></div>
      <div class="col-sm-1"><input name="technical_contact_first_name" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.technical.givenName %>" value="<%= memberCompany.contacts.technical.givenName %>" ></div>
      <div class="col-sm-1"><input name="technical_contact_last_name" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.technical.familyName %>" value="<%= memberCompany.contacts.technical.familyName %>" ></div>
      <div class="col-sm-3"><input name="technical_contact_email" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.technical.email %>" value="<%= memberCompany.contacts.technical.email %>" ></div>
      <div class="col-sm-2"><input name="technical_contact_phone" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.technical.phone %>" value="<%= memberCompany.contacts.technical.phone %>" ></div>
      <div class="col-sm-1"><input name="technical_contact_email_alias" type="text" class="domain-project-edit" placeholder="Select"></div>
      <div class="col-sm-1"><img src="assets/img/headshot.png" alt="" style="width:40px; margin-right:5px;  margin-left:-5px;" /><a><b>Add</b></a></div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
    <br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company">MARKETING</div>
      <input type="hidden" name="marketing_contact_id" id="marketing_contact_id" value="<%= memberCompany.contacts.marketing.id %>">
      <div class="col-sm-1"></div>
      <div class="col-sm-1"><input name="marketing_contact_first_name" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.marketing.givenName %>" value="<%= memberCompany.contacts.marketing.givenName %>" ></div>
      <div class="col-sm-1"><input name="marketing_contact_last_name" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.marketing.familyName %>" value="<%= memberCompany.contacts.marketing.familyName %>" ></div>
      <div class="col-sm-3"><input name="marketing_contact_email" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.marketing.email %>" value="<%= memberCompany.contacts.marketing.email %>" ></div>
      <div class="col-sm-2"><input name="marketing_contact_phone" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.marketing.phone %>" value="<%= memberCompany.contacts.marketing.phone %>" ></div>
      <div class="col-sm-1"><input name="marketing_contact_email_alias" type="text" class="domain-project-edit" placeholder="Select"></div>
      <div class="col-sm-1"></div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
    <br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company">FINANCE</div>
      <input type="hidden" name="finance_contact_id" id="finance_contact_id" value="<%= memberCompany.contacts.finance.id %>">
      <div class="col-sm-1"></div>
      <div class="col-sm-1"><input name="finance_contact_first_name" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.finance.givenName %>" value="<%= memberCompany.contacts.finance.givenName %>" ></div>
      <div class="col-sm-1"><input name="finance_contact_last_name" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.finance.familyName %>" value="<%= memberCompany.contacts.finance.familyName %>" ></div>
      <div class="col-sm-3"><input name="finance_contact_email" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.finance.email %>" value="<%= memberCompany.contacts.finance.email %>" ></div>
      <div class="col-sm-2"><input name="finance_contact_phone" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.finance.phone %>" value="<%= memberCompany.contacts.finance.phone %>" ></div>
      <div class="col-sm-1"><input name="finance_contact_email_alias" type="text" class="domain-project-edit" placeholder="Select"></div>
      <div class="col-sm-1"></div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
    <br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company"><input name="other_contact_type" type="text" class="domain-project-edit" style="margin-left:-5px;" placeholder="<%= memberCompany.contacts.other.type %>" value="<%= memberCompany.contacts.other.type %>" ></div>
      <input type="hidden" name="other_contact_id" id="other_contact_id" value="<%= memberCompany.contacts.other.id %>">
      <div class="col-sm-1"></div>
      <div class="col-sm-1"><input name="other_contact_first_name" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.other.givenName %>" value="<%= memberCompany.contacts.other.givenName %>" ></div>
      <div class="col-sm-1"><input name="other_contact_last_name" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.other.familyName %>" value="<%= memberCompany.contacts.other.familyName %>" ></div>
      <div class="col-sm-3"><input name="other_contact_email" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.other.email %>" value="<%= memberCompany.contacts.other.email %>" ></div>
      <div class="col-sm-2"><input name="other_contact_phone" type="text" class="domain-project-edit" placeholder="<%= memberCompany.contacts.other.phone %>" value="<%= memberCompany.contacts.other.phone %>" ></div>
      <div class="col-sm-1"><input name="other_contact_email_alias" type="text" class="domain-project-edit" placeholder="Select"></div>
      <div class="col-sm-1"></div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
  </div>
  <div class="container-fluid">
    <div class="col-sm-12 content mailing-list-project">
      <div class="hr-divider-keyline-save"></div>
      <div class="discard-message-edit-project">x Discard Changes</div>
      <div class="button-save-changes-edit-project-div">
        <input type="submit" class="button-save-changes-edit-project" name="button" value="Save Changes" />
      </div>
      <div class="hr-divider-keyline-save"></div>
    </div>
  </div>

</form>

<script type="text/javascript">
  function readImgSrc(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function (e) {
        $('#previewLogo').attr('src', e.target.result);
        document.getElementById('previewLogo').style.display = "block";
      }
      reader.readAsDataURL(input.files[0]);
    }
    else {
      document.getElementById('previewLogo').style.display = "none";
    }
  }
  $("#logo").change(function(){
    readImgSrc(this);
  });

  document.getElementById("membership_tier").value = "<%= memberCompany.tier %>" ;
  document.getElementById("membership_tier_label").innerHTML = "<%= memberCompany.tier %>";

  function changeMembershipTier(membership_tier){
    document.getElementById("membership_tier").value = membership_tier;
    document.getElementById("membership_tier_label").innerHTML = membership_tier;
  }

  function arrangeContacts(){
    var updatedContacts = [];
    updatedContacts[0] = {
      type: "BOARD MEMBER",
      id: document.getElementsByName('board_contact_id')[0].value,
      givenName: document.getElementsByName('board_contact_first_name')[0].value,
      familyName: document.getElementsByName('board_contact_last_name')[0].value,
      // bio: document.getElementsByName('board_contact__bio')[0].value,
      email: document.getElementsByName('board_contact_email')[0].value,
      phone: document.getElementsByName('board_contact_phone')[0].value
    };
    updatedContacts[1] = {
      type: "TECHNICAL",
      id: document.getElementsByName('technical_contact_id')[0].value,
      givenName: document.getElementsByName('technical_contact_first_name')[0].value,
      familyName: document.getElementsByName('technical_contact_last_name')[0].value,
      // bio: document.getElementsByName('technical_contact__bio')[0].value,
      email: document.getElementsByName('technical_contact_email')[0].value,
      phone: document.getElementsByName('technical_contact_phone')[0].value
    };
    updatedContacts[2] = {
      type: "MARKETING",
      id: document.getElementsByName('marketing_contact_id')[0].value,
      givenName: document.getElementsByName('marketing_contact_first_name')[0].value,
      familyName: document.getElementsByName('marketing_contact_last_name')[0].value,
      // bio: document.getElementsByName('marketing_contact__bio')[0].value,
      email: document.getElementsByName('marketing_contact_email')[0].value,
      phone: document.getElementsByName('marketing_contact_phone')[0].value
    };
    updatedContacts[3] = {
      type: "FINANCE",
      id: document.getElementsByName('finance_contact_id')[0].value,
      givenName: document.getElementsByName('finance_contact_first_name')[0].value,
      familyName: document.getElementsByName('finance_contact_last_name')[0].value,
      // bio: document.getElementsByName('finance_contact__bio')[0].value,
      email: document.getElementsByName('finance_contact_email')[0].value,
      phone: document.getElementsByName('finance_contact_phone')[0].value
    };
    updatedContacts[4] = {
      type: document.getElementsByName('other_contact_type')[0].value,
      id: document.getElementsByName('other_contact_id')[0].value,
      givenName: document.getElementsByName('other_contact_first_name')[0].value,
      familyName: document.getElementsByName('other_contact_last_name')[0].value,
      // bio: document.getElementsByName('other_contact__bio')[0].value,
      email: document.getElementsByName('other_contact_email')[0].value,
      phone: document.getElementsByName('other_contact_phone')[0].value
    };
    document.getElementById("updatedContacts").value = JSON.stringify(updatedContacts);
  }
</script>

<%- include('partials/footer') %>
