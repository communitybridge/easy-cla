<%- include('partials/header') %>

<form method="post" action="/create_member" enctype="multipart/form-data" onsubmit="arrangeContacts()">
  <% if(locals.projectId) { %>
    <input type="hidden" name="project_id" value="<%= projectId %>">
  <% } %>
  <div class="main-header-project-edit">
    <div class="project-logo-project-edit-main">
      <div class="project-logo-project-edit" id="logoRef">
        <div style="position: relative;">
          <div class="project-logo-project-edit-inside" style="position: absolute;" >
            <a href="#" onclick="document.getElementById('logo').click(); return false;" /> UPLOAD LOGO </a>
            <input type="file" accept="image/*" name='logoCompany' id="logo" style="visibility: hidden;" />
          </div>
          <img id="preview_logo" src="#" alt="LogoRef" style="width: 100%; display: none;">
        </div>
      </div>
      <div class="image-message-project-edit">
        Add .jpg, .png, or vector image files under 1 mb
      </div>
    </div>
    <div class="main-header-title-project-edit">
      <span style="color:#11ABDE">| </span>
      <input class="main-header-title-project-input" type="text" name="company_name" value="" placeholder="Add Your Company Name">
    </div>
    <div class="last-edited-project-edit">
      EDITING COMPANY CONTACTS -  Last saved 1:05 PM
    </div>
  </div>
  <div class="hr-divider-keyline"></div>
  <div class="white-subheader">
    <div class="content-subheader-member">
      <div class="hr-subheader-divider-vertical"></div>
      <div class="subheader-options">
        <span class="dropdown-toggle" data-toggle="dropdown">
          Membership Tier | <strong style="color:#044D74;"> <span id="membership_tier_label" >Select</span> </strong> <span class="caret"></span>
        </span>
        <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
          <li role="presentation"><a onclick="changeMembershipTier('PLATINUM')" role="menuitem" tabindex="-1">Platinum</a></li>
          <li role="presentation"><a onclick="changeMembershipTier('GOLD')" role="menuitem" tabindex="-1">Gold</a></li>
          <li role="presentation"><a onclick="changeMembershipTier('SILVER')" role="menuitem" tabindex="-1">Silver</a></li>
          <li role="presentation"><a onclick="changeMembershipTier('AFFILIATE')" role="menuitem" tabindex="-1">Affiliate</a></li>
        </ul>
        <input type="hidden" name="membership_tier" class="form-control" id="membership_tier" value="">
      </div>
      <div class="hr-subheader-divider-vertical"></div>
      <div class="subheader-options">
        Member Since:
      </div>
      <div class="subheader-datetime-options">
        <div class="input-group">
          <span class="input-group-addon">
            <span class="icon icon-calendar"></span>
          </span>
          <input type="text" name="start_date" id="start_date" value="" class="form-control" data-provide="datepicker" style="width: 200px;">
        </div>
      </div>
      <div class="hr-subheader-divider-vertical"></div>
      <div class="subheader-options">
        Renewal Date:
      </div>
      <div class="subheader-datetime-options">
        <div class="input-group">
          <span class="input-group-addon">
            <span class="icon icon-calendar"></span>
          </span>
          <input type="text" name="renewal_date" id="renewal_date" value="" class="form-control" data-provide="datepicker" style="width: 200px;">
        </div>
      </div>
    </div>
    <button class="save-button-project-edit" type="submit">
        <strong>SAVE</strong>
    </button>
  </div>
  <div class="hr-divider-keyline"></div>
  <div class="col-sm-12">
    <br>
    <div class="subtitle-content-project">Company Info</div>
    <div class="hr-divider-keyline"></div>
    <br>
    <br>
    <div class="col-sm-6 ">
      <div class="col-lg-12 ">
        <div class="subtitle-content-project">Headquarters Address</div>
        <div class="hr-divider-keyline"></div>
        <br>
      </div>
      <div class="col-lg-12 ">
        <input type="text" name="headquarters_address_line_1" class="domain-project-edit" placeholder="Address"> <br><br>
      </div>
      <div class="col-lg-12 " >
        <input type="text" name="headquarters_address_line_2" class="domain-project-edit" placeholder="Additional Address Information (suite, floor, etc.)"> <br><br>
      </div>
      <div class="col-lg-12 " style="padding: 0px; margin-left:10px;">
        <div class="col-lg-5 ">
          <input type="text" name="headquarters_city" class="textbox-add-company" placeholder="City">
        </div>
        <div class="col-lg-2">
          <input type="text" name="headquarters_state" class="textbox-add-company" placeholder="State">
        </div>
        <div class="col-lg-3">
          <select class="textbox-add-company" name="headquarters_country">
            <%- include('partials/selectCountryCode') %>
          </select>
        </div>
        <div class="col-lg-2">
          <input type="text" name="headquarters_zip_code" class="textbox-add-company" placeholder="Zip Code">
        </div>
      </div>
      <div class="col-lg-12 " style="margin-top: 20px;">
        <div class="col-lg-5 " style="margin-left:-15px">
          <input type="text" name="headquarters_phone" class="domain-project-edit" placeholder="Phone number"> <br><br>
        </div>
      </div>
    </div>

    <div class="col-sm-6 ">
      <div class="col-lg-12 ">
        <div class="subtitle-content-project">Billing Address</div>
        <div class="hr-divider-keyline"></div>
        <br>
      </div>
      <div class="col-lg-12 ">
        <input type="text" name="billing_address_line_1" class="domain-project-edit" placeholder="Address"> <br><br>
      </div>
      <div class="col-lg-12 " >
        <input type="text" name="billing_address_line_2" class="domain-project-edit" placeholder="Additional Address Information (suite, floor, etc.)"> <br><br>
      </div>
      <div class="col-lg-12 " style="padding: 0px; margin-left:10px;">
        <div class="col-lg-5 ">
          <input type="text" name="billing_city" class="textbox-add-company" placeholder="City">
        </div>
        <div class="col-lg-2">
          <input type="text" name="billing_state" class="textbox-add-company" placeholder="State">
        </div>
        <div class="col-lg-3">
          <select class="textbox-add-company" name="billing_country">
            <%- include('partials/selectCountryCode') %>
          </select>
        </div>
        <div class="col-lg-2">
          <input type="text" name="billing_zip_code" class="textbox-add-company" placeholder="Zip Code">
        </div>
      </div>
      <div class="col-lg-12 " style="margin-top: 20px;">
        <div class="col-lg-5 " style="margin-left:-15px">
          <input type="text" name="billing_phone" class="domain-project-edit" placeholder="Phone number"> <br><br>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-12">
    <input type="hidden" id="newContacts"  name="newContacts" value="">
    <br><br><br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2">Contacts</div>
      <div class="col-sm-1">Bio</div>
      <div class="col-sm-8">Information</div>
      <div class="col-sm-1">Headshot</div>
    </div>
    <br><br>
    <div class="hr-divider-keyline"></div>
    <br><br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company">BOARD MEMBER</div>
      <div class="col-sm-1">
        <input type="hidden" name="board_contact_bio" id="board_contact_bio" value="">
        <a href="#add-bio-modal" data-toggle="modal" data-member-bio-name="board_contact_bio" data-member-type="Board Member">Add</a>
      </div>
      <div class="col-sm-2"><input type="text" name="board_contact_first_name" class="domain-project-edit" placeholder="Lauren"></div>
      <div class="col-sm-2"><input type="text" name="board_contact_last_name" class="domain-project-edit" placeholder="Maxwell"></div>
      <div class="col-sm-2"><input type="text" name="board_contact_email" class="domain-project-edit" placeholder="lmaxwell@business.com"></div>
      <div class="col-sm-2"><input type="text" name="board_contact_phone" class="domain-project-edit" placeholder="Phone"></div>
      <div class="col-sm-1">
        <a href="#">
          <img id="preview_board_headshot" onclick="document.getElementById('board_headshot').click(); return false;"  src="#" alt="" style="height: 50px; display: none;">
        </a>
        <a id="board_headshot_add" href="#" style="margin-left:15px; display:inline-block;" onclick="document.getElementById('board_headshot').click(); return false;" /> Add </a>
        <input type="hidden" name="board_headshot_filename" id="board_headshot_filename"  value="">
        <input type="file" accept="image/*" name='board_headshot' id="board_headshot" style="visibility: hidden;" />
      </div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
    <br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company">TECHNICAL (TSC)</div>
      <div class="col-sm-1">
        <input type="hidden" name="technical_contact_bio" id="technical_contact_bio" value="">
        <a href="#add-bio-modal" data-toggle="modal" data-member-bio-name="technical_contact_bio" data-member-type="Technical Member">Add</a>
      </div>
      <div class="col-sm-2"><input name="technical_contact_first_name" type="text" class="domain-project-edit" placeholder="Jake"></div>
      <div class="col-sm-2"><input name="technical_contact_last_name" type="text" class="domain-project-edit" placeholder="Armstrong"></div>
      <div class="col-sm-2"><input name="technical_contact_email" type="text" class="domain-project-edit" placeholder="jarmstrong@business.com"></div>
      <div class="col-sm-2"><input name="technical_contact_phone" type="text" class="domain-project-edit" placeholder="Phone"></div>
      <div class="col-sm-1">
        <a href="#">
          <img id="preview_technical_headshot" onclick="document.getElementById('technical_headshot').click(); return false;"  src="#" alt="" style="height: 50px; display: none;">
        </a>
        <a id="technical_headshot_add" href="#" style="margin-left:15px; display:inline-block;" onclick="document.getElementById('technical_headshot').click(); return false;" /> Add </a>
        <input type="hidden" name="technical_headshot_filename" id="technical_headshot_filename"  value="">
        <input type="file" accept="image/*" name='technical_headshot' id="technical_headshot" style="visibility: hidden;" />
      </div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
    <br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company">MARKETING</div>
      <div class="col-sm-1">
        <input type="hidden" name="marketing_contact_bio" id="marketing_contact_bio" value="">
        <a href="#add-bio-modal" data-toggle="modal" data-member-bio-name="marketing_contact_bio" data-member-type="Marketing Member">Add</a>
      </div>
      <div class="col-sm-2"><input name="marketing_contact_first_name" type="text" class="domain-project-edit" placeholder="First name"></div>
      <div class="col-sm-2"><input name="marketing_contact_last_name" type="text" class="domain-project-edit" placeholder="Last name"></div>
      <div class="col-sm-2"><input name="marketing_contact_email" type="text" class="domain-project-edit" placeholder="Email address"></div>
      <div class="col-sm-2"><input name="marketing_contact_phone" type="text" class="domain-project-edit" placeholder="Phone"></div>
      <div class="col-sm-1">
        <a href="#">
          <img id="preview_marketing_headshot" onclick="document.getElementById('marketing_headshot').click(); return false;"  src="#" alt="" style="height: 50px; display: none;">
        </a>
        <a id="marketing_headshot_add" href="#" style="margin-left:15px; display:inline-block;" onclick="document.getElementById('marketing_headshot').click(); return false;" /> Add </a>
        <input type="hidden" name="marketing_headshot_filename" id="marketing_headshot_filename"  value="">
        <input type="file" accept="image/*" name='marketing_headshot' id="marketing_headshot" style="visibility: hidden;" />
      </div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
    <br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company">FINANCE</div>
      <div class="col-sm-1">
        <input type="hidden" name="finance_contact_bio" id="finance_contact_bio" value="">
        <a href="#add-bio-modal" data-toggle="modal" data-member-bio-name="finance_contact_bio" data-member-type="Finance Member">Add</a>
      </div>
      <div class="col-sm-2"><input name="finance_contact_first_name" type="text" class="domain-project-edit" placeholder="First name"></div>
      <div class="col-sm-2"><input name="finance_contact_last_name" type="text" class="domain-project-edit" placeholder="Last name"></div>
      <div class="col-sm-2"><input name="finance_contact_email" type="text" class="domain-project-edit" placeholder="Email address"></div>
      <div class="col-sm-2"><input name="finance_contact_phone" type="text" class="domain-project-edit" placeholder="Phone"></div>
      <div class="col-sm-1">
        <a href="#">
          <img id="preview_finance_headshot" onclick="document.getElementById('finance_headshot').click(); return false;"  src="#" alt="" style="height: 50px; display: none;">
        </a>
        <a id="finance_headshot_add" href="#" style="margin-left:15px; display:inline-block;" onclick="document.getElementById('finance_headshot').click(); return false;" /> Add </a>
        <input type="hidden" name="finance_headshot_filename" id="finance_headshot_filename"  value="">
        <input type="file" accept="image/*" name='finance_headshot' id="finance_headshot" style="visibility: hidden;" />
      </div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
    <br>
    <div class="subtitle-content-project col-sm-12">
      <div class="col-sm-2 table-contact-add-company"><input name="other_contact_type" type="text" class="domain-project-edit" style="margin-left:-5px;" placeholder="Contact Type"></div>
      <div class="col-sm-1">
        <input type="hidden" name="other_contact_bio" id="other_contact_bio" value="">
        <a href="#add-bio-modal" data-toggle="modal" data-member-bio-name="other_contact_bio" data-member-type="Other Member">Add</a>
      </div>
      <div class="col-sm-2"><input name="other_contact_first_name" type="text" class="domain-project-edit" placeholder="First name"></div>
      <div class="col-sm-2"><input name="other_contact_last_name" type="text" class="domain-project-edit" placeholder="Last name"></div>
      <div class="col-sm-2"><input name="other_contact_email" type="text" class="domain-project-edit" placeholder="Email address"></div>
      <div class="col-sm-2"><input name="other_contact_phone" type="text" class="domain-project-edit" placeholder="Phone"></div>
      <div class="col-sm-1">
        <a href="#">
          <img id="preview_other_headshot" onclick="document.getElementById('other_headshot').click(); return false;"  src="#" alt="" style="height: 50px; display: none;">
        </a>
        <a id="other_headshot_add" href="#" style="margin-left:15px; display:inline-block;" onclick="document.getElementById('other_headshot').click(); return false;" /> Add </a>
        <input type="hidden" name="other_headshot_filename" id="other_headshot_filename"  value="">
        <input type="file" accept="image/*" name='other_headshot' id="other_headshot" style="visibility: hidden;" />
      </div>
    </div>
    <br><br><br>
    <div class="hr-divider-keyline"></div>
  </div>
  <div class="container-fluid">
    <div class="col-sm-12 content mailing-list-project">
      <div class="hr-divider-keyline-save"></div>
      <div class="discard-message-edit-project">x Discard Changes</div>
      <div class="button-save-changes-edit-project-div">
        <input type="submit" class="button-save-changes-edit-project" name="button" value="Save Changes" />
      </div>
      <div class="hr-divider-keyline-save"></div>
    </div>
  </div>

</form>

<script type="text/javascript">
  function readImgSrc(input, target) {
    var img_target = "#preview_" + target;
    var preview_target = "preview_" + target;
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function (e) {
        $(img_target).attr('src', e.target.result);
        document.getElementById(preview_target).style.display = "block";
        document.getElementById(target + "_filename").value = input.files[0].name;
      }
      reader.readAsDataURL(input.files[0]);
    }
    else {
      document.getElementById(preview_target).style.display = "none";
    }
  }
  $("#logo").change(function(){
    readImgSrc(this, "logo");
  });
  $("#board_headshot").change(function(){
    readImgSrc(this, "board_headshot");
    document.getElementById("board_headshot_add").style.display = "none";
  });
  $("#technical_headshot").change(function(){
    readImgSrc(this, "technical_headshot");
    document.getElementById("technical_headshot_add").style.display = "none";
  });
  $("#marketing_headshot").change(function(){
    readImgSrc(this, "marketing_headshot");
    document.getElementById("marketing_headshot_add").style.display = "none";
  });
  $("#finance_headshot").change(function(){
    readImgSrc(this, "finance_headshot");
    document.getElementById("finance_headshot_add").style.display = "none";
  });
  $("#other_headshot").change(function(){
    readImgSrc(this, "other_headshot");
    document.getElementById("other_headshot_add").style.display = "none";
  });

  function changeMembershipTier(membership_tier){
    document.getElementById("membership_tier").value = membership_tier;
    document.getElementById("membership_tier_label").innerHTML = membership_tier;
  };

  function arrangeContacts(){
    var newContacts = [];
    newContacts[0] = {
      type: "BOARD MEMBER",
      givenName: document.getElementsByName('board_contact_first_name')[0].value,
      familyName: document.getElementsByName('board_contact_last_name')[0].value,
      bio: document.getElementsByName('board_contact_bio')[0].value,
      email: document.getElementsByName('board_contact_email')[0].value,
      phone: document.getElementsByName('board_contact_phone')[0].value,
      headshotRef: document.getElementsByName('board_headshot_filename')[0].value
    };
    newContacts[1] = {
      type: "TECHNICAL",
      givenName: document.getElementsByName('technical_contact_first_name')[0].value,
      familyName: document.getElementsByName('technical_contact_last_name')[0].value,
      bio: document.getElementsByName('technical_contact_bio')[0].value,
      email: document.getElementsByName('technical_contact_email')[0].value,
      phone: document.getElementsByName('technical_contact_phone')[0].value,
      headshotRef: document.getElementsByName('technical_headshot_filename')[0].value
    };
    newContacts[2] = {
      type: "MARKETING",
      givenName: document.getElementsByName('marketing_contact_first_name')[0].value,
      familyName: document.getElementsByName('marketing_contact_last_name')[0].value,
      bio: document.getElementsByName('marketing_contact_bio')[0].value,
      email: document.getElementsByName('marketing_contact_email')[0].value,
      phone: document.getElementsByName('marketing_contact_phone')[0].value,
      headshotRef: document.getElementsByName('marketing_headshot_filename')[0].value
    };
    newContacts[3] = {
      type: "FINANCE",
      givenName: document.getElementsByName('finance_contact_first_name')[0].value,
      familyName: document.getElementsByName('finance_contact_last_name')[0].value,
      bio: document.getElementsByName('finance_contact_bio')[0].value,
      email: document.getElementsByName('finance_contact_email')[0].value,
      phone: document.getElementsByName('finance_contact_phone')[0].value,
      headshotRef: document.getElementsByName('finance_headshot_filename')[0].value
    };
    newContacts[4] = {
      type: document.getElementsByName('other_contact_type')[0].value,
      givenName: document.getElementsByName('other_contact_first_name')[0].value,
      familyName: document.getElementsByName('other_contact_last_name')[0].value,
      bio: document.getElementsByName('other_contact_bio')[0].value,
      email: document.getElementsByName('other_contact_email')[0].value,
      phone: document.getElementsByName('other_contact_phone')[0].value,
      headshotRef: document.getElementsByName('other_headshot_filename')[0].value
    };
    document.getElementById("newContacts").value = JSON.stringify(newContacts);
  }
</script>

<%- include('partials/bio_modal') %>
<%- include('partials/footer') %>
